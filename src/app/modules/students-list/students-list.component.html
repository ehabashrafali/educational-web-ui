<div class="grid w-full mb-10">
  <div class="flex justify-between w-full">
    <p class="text-4xl ms-10 mt-5 font-semibold">Students</p>
  </div>

  <div class="grid grid-cols-1 gap-2 m-8">
    <div class="flex flex-auto items-center">
      <mat-form-field>
        <mat-icon
          class="icon-size-5"
          [svgIcon]="'heroicons_solid:magnifying-glass'"
          matPrefix
        ></mat-icon>
        <mat-label>Filter</mat-label>
        <input
          matInput
          (keyup)="applyFilter($event)"
          placeholder="Ex. ium"
          #input
        />
      </mat-form-field>

      <button
        class="ml-4 min-w-10 px-1 sm:px-4"
        mat-flat-button
        [color]="'primary'"
      >
        <mat-icon
          class="icon-size-5"
          [svgIcon]="'heroicons_solid:plus-circle'"
        ></mat-icon>
        <span class="ml-2 hidden sm:inline-block">New Student</span>
      </button>
    </div>

    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
      <ng-container matColumnDef="Name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let student">{{ student.fullName }}</td>
      </ng-container>

      <ng-container matColumnDef="Email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let student">{{ student.email }}</td>
      </ng-container>

      <ng-container matColumnDef="Country">
        <th mat-header-cell *matHeaderCellDef>Country</th>
        <td mat-cell *matCellDef="let student">
          @if (student.country) {
            {{ student.country }}
          } @else {
            --
          }
        </td>
      </ng-container>
      <ng-container matColumnDef="Status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let student">
          <span
            class="px-2 py-1 rounded-full text-xs font-medium"
            [ngClass]="{
              'bg-green-100 text-green-800': student.isActive,
              'bg-red-100 text-red-800': !student.isActive,
            }"
          >
            {{ student.isActive ? "Active" : "Inactive" }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="Actions">
        <th mat-header-cell *matHeaderCellDef class="text-center">Actions</th>

        <td mat-cell *matCellDef="let student" class="text-right">
          <button
            mat-icon-button
            [matMenuTriggerFor]="menu"
            aria-label="Actions menu"
          >
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="edit(student.id)">
              <mat-icon>edit</mat-icon>
              <span>Edit</span>
            </button>

            <button mat-menu-item (click)="deactivate(student.id)">
              <mat-icon>delete</mat-icon>
              <span>Deactivate</span>
            </button>
          </mat-menu>
        </td>
      </ng-container>

      <tr
        mat-header-row
        *matHeaderRowDef="displayedColumns"
        class="bg-primary text-white border-b pb-3 text-center rounded-t-md"
      ></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">
          No data matching the filter "{{ input.value }}"
        </td>
      </tr>
    </table>
  </div>
</div>
